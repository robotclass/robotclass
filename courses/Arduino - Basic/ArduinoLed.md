Зажигаем светодиод на Arduino Uno
================================

Как известно, первая программа, которую человек пишет при изучении программирования называется "Hello World!". Суть этой программы сводится к тому, чтобы после запуска на экране появилась указанная простая фраза.

В мире микроэлектроники, симметричной задачей смело можно назвать мигание светодиодом :) Другими словами, нам необходимо управлять включением и выключением светодиода при помощи микроконтроллера. В нашем случае, таким контроллером станет Arduino. Приступим!

##1. Светодиод##

Светодиод - это устройство, которое представляет собой полупроводниковый прибор, способный излучать свет при пропускании через него электрического тока в прямом направлении (от анода к катоду). Ниже приведена схема типичного светодиода с линзой.

<a href="http://robotclass.ru/wp-content/uploads/2015/06/LED.png" width="400"><img class="alignnone size-medium wp-image-949" src="http://robotclass.ru/wp-content/uploads/2014/12/LED_-300x191.png" alt="LED_" width="300" height="191" /></a>

Для того чтобы правильно включить светодиод в электрическую цепь, необходимо отличать катод от анода. Сделать это можно по двум признакам:

1) Анод светодиода имеет более длинный проводник
2) Со стороны катода, корпус светодиода немного срезан

А вот так выглядят светодиоды "в живую".

<a href="http://robotclass.ru/wp-content/uploads/2014/12/LEDs-2.jpg"><img class="  wp-image-952 alignnone" src="http://robotclass.ru/wp-content/uploads/2014/12/LEDs-2-300x266.jpg" alt="LEDs-2" width="179" height="160" /></a>

Это обычные одноцветные светодиоды. А бывают еще двух, и даже трехцветные. Вот так, например, выглядит трехцветный (RGB) светодиод:

<a href="http://robotclass.ru/wp-content/uploads/2014/12/RGB_LED.jpg"><img class="alignnone size-medium wp-image-950" src="http://robotclass.ru/wp-content/uploads/2014/12/RGB_LED-300x200.jpg" alt="RGB_LED" width="300" height="200" /></a>

У этого светодиода сразу четыре ноги. Одна - катод, а три другие - аноды для трех разных цветов.

В современной микроэлектронике применяются миниатюрные светодиоды для поверхностного монтажа. Такие индикаторы, например, имеются на Arduino Uno для информирования пользователя о состоянии системы. Вот он светит зелененьким цветом:

<a href="http://robotclass.ru/wp-content/uploads/2014/12/Arduino_led-4.jpg"><img class="alignnone size-medium wp-image-953" src="http://robotclass.ru/wp-content/uploads/2014/12/Arduino_led-4-300x225.jpg" alt="Arduino_led-4" width="300" height="225" /></a>

##2. Схема включения

Чтобы зажечь светодиод, нам потребуется подключить его к одному из цифровых выводов Arduino. Пусть это будет линия №2.

Катод светодиода подключим к минусу (земля), а анод пойдет у нас на линию №2 через токозадающий резистор 150 Ом. Вот и схема:

<a href="http://robotclass.ru/wp-content/uploads/2014/12/ledx1_bb.png"><img class="alignnone  wp-image-954" src="http://robotclass.ru/wp-content/uploads/2014/12/ledx1_bb-300x79.png" alt="ledx1_bb" width="549" height="160" /></a>

Резистор помогает решить две задачи. Во-первых, при подключении к источнику питания, светодиод старается бесконтрольно пропустить через себя как можно больше тока. Это может привести к самосожжению самого светодиода и к повреждению контроллера! Обычному светодиоду нужно всего 20 мА тока.

Вторую функцию, которую выполняет резистор - снижение напряжение с 5 Вольт до 2 Вольт, что для многих стандартных светодиодов является рабочим напряжением.

Учитывая эти два пожелания, мы можем рассчитать номинал нашего токозадающего резистора. Закона Ома в студию!
```
I = U/R;
R = U/I = (5В-2В)/20мА = 150 Ом
```
Итак, мы выяснили, что токозадающий резистор для классических выводных светодиодов имеет номинал 150 Ом, именно его мы и установим в схему.

Вообще, если под рукой нет резистора на 150Ом, можно любой другой большего номинала. Просто светодиод будет гореть менее ярко. Big deal.

##3. Функция вывода цифровых данных

Теперь, когда светодиод подключен а Arduino, настало время программирования.

Для вывода высокого или низкого уровня сигнала на один из контактов общего назначения, в редакторе программ Arduino IDE используется функция <strong>digitalWrite</strong>. Вызов этой функции имеет вид:
```
digitalWrite( номер_контакта, уровень_сигнала );
```
где аргумент уровень_сигнала может принимать два значения: HIGH (высокий, +5В) или LOW (низкий, заземлен).

Другими словами, если написать:
```
digitalWrite( 2, HIGH );
```
То Arduino соединит ногу №2 с питанием +5В и светодиод, ясен пень, вспыхнет!

Если же напишем:

```
digitalWrite( 2, LOW );
```

Анод светодиода замкнется на землю, и светодиод погаснет :(

С этим понятно. Остался еще один момент. Чтобы контакт №2 именно выводил сигнал, а не принимал его, потребуется использовать специальную функцию для установки режима контактов - <strong>pinMode</strong>. Формат этой функции таков:

```
pinMode( номер_контакта, режим_контакта );
```

где аргумент режим_контакта может принимать значения: OUTPUT (вывод) и INPUT (ввод).

То есть нам, чтобы помигать светодиодом, надо будет добавить в программу строчку:

```
pinMode( 2, OUTPUT );
```

##4. Программа

Итоговая программа для мигания светодиодом будем иметь вид:
```
int led = 2;
void setup() { 
    pinMode(led, OUTPUT); // установка 2-го контакта в режим вывода
}
void loop() {
    digitalWrite(led, HIGH); // вывод №2 в активное состояние
    delay(1000); // пауза 1-секунда
    digitalWrite(led, LOW); // вывод №2 в неактивное состояние
    delay(1000); // пауза 1-секунда
}
```
В программе присутствует еще одна полезная функция - <strong>delay</strong>. Это просто пауза, задаваемая в миллисекундах. delay (1000) - означает паузу в 1000мс, что равно 1-й секунде.

Все. Загружаем программу на Arduino, и смотрим на мигающий светодиод! Вы сделали это сами. Запрограммировали микроконтроллер! Круто, не правда ли?:)

